<section class="filters container">
  <div class="controls">
    <mat-form-field appearance="outline">
      <mat-label>Category</mat-label>
      <mat-select [value]="category()" (valueChange)="category.set($event); onCategoryChange()">
        @for (c of categories(); track c) {
        <mat-option [value]="c">{{ c }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Sort</mat-label>
      <mat-select [value]="sort()" (valueChange)="sort.set($event); onSortChange()">
        <mat-option value="">None</mat-option>
        <mat-option value="price:asc">Price: Low → High</mat-option>
        <mat-option value="price:desc">Price: High → Low</mat-option>
        <mat-option value="category:asc">Category A → Z</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
</section>

<div class="container results-info">
  Showing {{ (products() || []).length }} of {{ totalItems() }} products
</div>

@if (loading()) {
<p class="container">Loading products…</p>
} @else if (error()) {
<p class="container error">{{ error() }}</p>
} @else {
<div class="grid container mat-typography">
  @for (p of products(); track p.id) {
  <app-product-card [product]="p" (edit)="onEdit.emit($event)" (delete)="onDelete.emit($event)" />
  }
</div>

<app-pagination
  [currentPage]="currentPage()"
  [totalPages]="totalPages()"
  [totalItems]="totalItems()"
  [pageSize]="pageSize"
  (onPageChange)="onPageChange($event)"
/>
}
